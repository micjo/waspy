{% extends "base.jinja2" %}

{% block content %}

<table class="table table-striped table-hover">
  <thead>
      <th scope="col">Name</th>
      <th scope="col">Connection state</th>
      <th scope="col">Error State</th>
      <th scope="col">Last request id</th>
      <th scope="col">Other</th>
  </thead>
  <tbody>
      {% for key,value in config.items() %}
          <tr>
              <td> {{value["title"]}}</td>
              <td> <div class="badge bg-secondary" id={{key}}_connect_state> </div></td>
              <td> <div id={{key}}_error_state> </div></td>
              <td> <div id={{key}}_request_id></div></td>
              <td> <div id={{key}}_status></div></td>
          </tr>
      {% endfor %}
  </tbody>
</table>

<script type="module">
    import * as dashboard from '{{url_for('static', path='dashboard.js')}}'

    dashboard.refreshAllData( {{config|safe}} );
    window.setInterval(function() {
        dashboard.refreshAllData( {{config|safe}} );
    }, 2000);
</script>

{% endblock %}
